<html>
<head>
    <title>Role Matcher demo</title>
</head>
    <style>
        body {
          font-family: "Source Sans Pro",Helvetica,Arial,sans-serif;
          color:#272625;
        }
        

        h1 {
          text-align:center;
          font-size:60px;
          color:#951b81;          
        }


        label {
          border:1px solid #ddd;
          padding:10px;
          margin:0 0 0 0px;
          display:block;
          font-size:20px;
        }

        label:hover {
          background:#e3dede;
          cursor:pointer;
        }

        ul {
          list-style: none;
          columns: 3;
          -webkit-columns: 3;
          -moz-columns: 3;
          
        }

        nav li {
          display:inline;
          margin:0px;
          /* border-style:solid;
          border-width:thin; */
          position:relative;

        }
        nav {
          text-align: center;
          /* border-style: solid;
          border-width: thin; */
        }

        nav ul {
          padding:inherit;
          list-style:none;
        }

        
        
        button {
          background-color: #c0136b; /* Green */
          border: none;
          color: white;
          padding: 15px 32px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          border-radius: 10px;
      }
      
      .button {
        background-position: center;
        transition: background 0.8s;
      }
      .button:hover {
        background: #c0136b radial-gradient(circle, transparent 1%, #d0136b 1%) center/15000%;
      }
      .button:active {
        background-color: #c0136b;
        background-size: 100%;
        transition: background 0s;
      }
      
      input[type="checkbox"]{
          visibility:hidden;
      }
      
      input[type="checkbox"]:checked+label{ 
          font-weight: bold;
          border: 1px solid #c0136b;
       } 
      
       .box{
           padding-left:5%;
           width:90%;
       }
        
        
        
       div.logo {
           position: absolute;
           height:100px;
           width:200px;
           left :50px;
           top:10px;
           margin:10px;
           
       }
       
       .column {
         float: left;
         padding: 10px;
         height: 300px; /* Should be removed. Only for demonstration */
       }

       .left {
         width: 25%;
       }

       .right {
         width: 65%;
       }

       /* Clear floats after the columns */
       .row:after {
         content: "";
         display: table;
         clear: both;
       }



       
       
        </style>
    <body>
        <div class="logo"><img src = "img/logo.svg"></div>
        
      <h1 style='padding-top:70px'>Pick your strongest attributes:</h1>
         

        <ul class="choices">


        <li><input class ='choice' id="problemsolving" type="checkbox"><label for="problemsolving">Problem Solving</label></li>

        <li><input class ='choice' id="lying" type="checkbox"><label for="lying">Lying</label></li>

        <li><input class ='choice' id="creativity" type="checkbox"><label for="creativity">Creativity</label></li>

        <li><input class ='choice' id="planning" type="checkbox"><label for="planning">Planning</label></li>

        <li><input class ='choice' id="organisation" type="checkbox"><label for="organisation">Organisation</label></li>

        <li><input class ='choice' id="leadership" type="checkbox"><label for="leadership">Leadership</label></li>

        <li><input class ='choice' id="flexibility" type="checkbox"><label for="flexibility">Flexibility</label></li>

        <li><input class ='choice' id="handlepressure" type="checkbox"><label for="handlepressure">Handle Pressure</label></li>

        <li><input class ='choice' id="initiative" type="checkbox"><label for="initiative">Initiative</label></li>

        <li><input class ='choice' id="teamwork" type="checkbox"><label for="teamwork">Teamwork</label></li>

        <li><input class ='choice' id="communication" type="checkbox"><label for="communication">Communication</label></li>

        <li><input class ='choice' id="technicalliteracy" type="checkbox"><label for="technicalliteracy">Technical literacy</label></li>

        </ul>


<center><button class="button" onclick="calc()">Click to see what role you matched to!</button></center>

<div class = 'box'>

<h3 id='roletext' hidden>You could be well suited to becoming a...</h3>
<div id = 'profiles'>
</div>


</div>

<div style ="display:none">
    
<div id="data_scientist" class="panel">
  <h2>Data Scientist!</h2>
  
  <div class="row">
    <div class="column left" >
  <img src = "img/Data_science_Experiment@4x.png" height="250px">
    </div>
    <div class="column right" >
      <h2>About this role</h2>
      <p>Something about a profile. Some more words</p>
      <p>Some text..</p>
    </div>
  </div>

</div>


<div id="data_consultant" class="panel">
  <h2>Data consultant!</h2>
  <div class="row">
    <div class="column left" >
  <img src = "img/People_Presentation@4x.png" height="250px">
    </div>
    <div class="column right" >
      <h2>About this role</h2>
      <p>Something about a profile. Some more words</p>
      <p>Some text..</p>
    </div>
  </div>
</div>

<div id="data_analyst" class="panel">
  <h2>Data analyst!</h2>
  <div class="row">
    <div class="column left" >
  <img src = "img/Analytics_Box_and_whisker@4x.png" height="250px">
    </div>
    <div class="column right" >
      <h2>About this role</h2>
      <p>Something about a profile. Some more words</p>
      <p>Some text..</p>
    </div>
  </div>
</div>

<div id="delivery_manager" class="panel">
  <h2>Delivery manager!</h2>
  <div class="row">
    <div class="column left" >
  <img src = "img/People_Delegate@4x.png" height="250px">
    </div>
    <div class="column right" >
      <h2>About this role</h2>
      <p>Something about a profile. Some more words</p>
      <p>Some text..</p>
    </div>
  </div>
</div>

</div>

<!-- take out this line if you don't want ot show it. or comment out the JS.-->
<div id='role_score'></div>

      <script>
         
          function calc() { 
              
              dd = Array.from(document.getElementsByClassName("choice"));

              var mychoices = {};
              let picked = new Set()
              var arrayLength = dd.length;
              
              for (var i = 0; i < arrayLength; i++) {
                  
                  mychoices[dd[i].id] = dd[i].checked
                  if (dd[i].checked){
                      picked.add(dd[i].id)
                  }
                      
              }
              
              if (picked.size == 0){
                  return  0;
              }
              
              // calculate the top score from some dummy roles matrix.
              
              //Problem Solving','Lying','Creativity','Planning','Organisation','Leadership','Flexibility', 'Handle Pressure', 'Initiative', 'Teamwork' , 'Communication', 'Computer and technical literacy
              
              var role_stats = {
                  'data_scientist':['problemsolving','creativity','technicalliteracy'],
              'data_consultant':['planning','problemsolving','technicalliteracy','communication'],
                  'data_analyst':['problemsolving','flexibility','technicalliteracy'],
                  'delivery_manager':['leadership','lying','organisation','teamwork','communication']};

             // given the choces, loop over the roles and find the one with most matches. 
              
              var best_role_num = 0
              var scores = {}
              var shower = []
              for (var key in role_stats) {
                  // check if the property/key is defined in the object itself, not in parent
                  if (role_stats.hasOwnProperty(key)) {           
                      // console.log(key, role_stats[key]);
                      var myset = new Set(role_stats[key]);
                      // do intersection
                      let overlap = new Set([...picked].filter(x => myset.has(x)));
                      scores[key] = overlap.size;
                      if (overlap.size > 0) {
                          shower.push([document.getElementById(key).innerHTML,overlap.size]);     
                      }
                  }
              }
              
              shower.sort(function(a,b){
                  return b[1] - a[1];
              });
              var shower2 = shower.map(function(value,index) { return value[0]; })

              document.getElementById("profiles").innerHTML = shower2.join(' ');
              document.getElementById("roletext").hidden = false;
              //remove this line if you don't want the debug
              document.getElementById("role_score").innerHTML = JSON.stringify(scores);
          }
          
      </script>
     </body>

    
</html>